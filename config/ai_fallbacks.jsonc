// AI Model Fallback Strategy
{
  "fallback_strategy": {
    "default_fallback": "claudecode",
    "auto_switch": true,
    "retry_count": 2,
    "retry_delay_ms": 3000
  },
  "stage_overrides": {
    "01-brainstorm": {
      "primary": "gemini",
      "fallback": "claude",
      "mcp_required": false,
      "rationale": "Brainstorming benefits from Gemini's creative divergent thinking"
    },
    "02-research": {
      "primary": "claude",
      "fallback": "gemini",
      "mcp_required": true,
      "mcp_tools": [
        "exa",
        "web_search"
      ],
      "rationale": "Research requires MCP tools for web search and data gathering"
    },
    "03-planning": {
      "primary": "gemini",
      "fallback": "claude",
      "mcp_required": false,
      "rationale": "System architecture benefits from creative exploration"
    },
    "04-ui-ux": {
      "primary": "gemini",
      "fallback": "claude",
      "mcp_required": false,
      "mcp_tools": [
        "figma"
      ],
      "rationale": "UI/UX design requires creative visual thinking"
    },
    "05-task-management": {
      "primary": "claude",
      "fallback": "gemini",
      "mcp_required": true,
      "mcp_tools": [
        "notion"
      ],
      "rationale": "Task management integrates with Notion via MCP"
    },
    "06-implementation": {
      "primary": "claude",
      "fallback": "codex",
      "mcp_required": true,
      "mcp_tools": [
        "context7",
        "serena"
      ],
      "rationale": "Implementation needs context7 for up-to-date documentation"
    },
    "07-refactoring": {
      "primary": "codex",
      "fallback": "claude",
      "mcp_required": false,
      "rationale": "Refactoring is pure code analysis - Codex specialty"
    },
    "08-qa": {
      "primary": "claude",
      "fallback": "codex",
      "mcp_required": false,
      "mcp_tools": [
        "playwright"
      ],
      "rationale": "QA can benefit from browser automation via playwright"
    },
    "09-testing": {
      "primary": "claude",
      "fallback": "codex",
      "mcp_required": true,
      "mcp_tools": [
        "playwright"
      ],
      "rationale": "E2E testing requires playwright MCP for browser automation"
    },
    "10-deployment": {
      "primary": "claude",
      "fallback": "codex",
      "mcp_required": false,
      "rationale": "Deployment scripts and CI/CD configuration"
    }
  },
  "triggers": [
    "api_failure",
    "rate_limit",
    "quality_threshold_fail",
    "timeout",
    "context_overflow"
  ],
  "quality_thresholds": {
    "code_quality": 0.7,
    "test_coverage": 0.6,
    "response_coherence": 0.8
  },
  "logging": {
    "enabled": true,
    "destination": "HANDOFF.md",
    "log_format": "## AI Model Switch Log\n| Time | From | To | Reason | Stage |\n|------|------|----|---------| ------|\n"
  },
  "model_capabilities": {
    "claude": {
      "strengths": [
        "MCP tool integration",
        "Code generation accuracy",
        "Context understanding"
      ],
      "weaknesses": [
        "Creative brainstorming"
      ],
      "best_for": [
        "implementation",
        "testing",
        "task_management"
      ]
    },
    "gemini": {
      "strengths": [
        "Creative exploration",
        "Rapid ideation",
        "Visual thinking"
      ],
      "weaknesses": [
        "No MCP integration"
      ],
      "best_for": [
        "brainstorming",
        "planning",
        "ui_ux"
      ]
    },
    "codex": {
      "strengths": [
        "Deep code analysis",
        "Refactoring patterns",
        "Code comprehension"
      ],
      "weaknesses": [
        "No MCP integration",
        "Limited creativity"
      ],
      "best_for": [
        "refactoring",
        "code_review",
        "unit_testing"
      ]
    }
  }
}