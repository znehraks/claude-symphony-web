# Gemini Architecture Design Output

> Generated by: Gemini CLI
> Stage: 03-planning
> Topic: System Architecture & Project Planning

---

## 1. Component Hierarchy Diagram

```
app/layout.tsx (Server Component - fonts, metadata)
└── app/page.tsx (Server Component - assembles sections)
    ├── sections/hero.tsx (Client)
    │   ├── ui/particles.tsx (Canvas)
    │   ├── ui/split-text.tsx (GSAP)
    │   └── ui/copy-command.tsx
    ├── sections/quick-start.tsx (Client)
    │   └── ui/terminal.tsx
    │       └── ui/typing-animation.tsx
    ├── sections/pipeline.tsx (Client)
    │   └── components/pipeline/stage-grid.tsx
    │       └── components/pipeline/stage-card.tsx
    │           └── components/pipeline/detail-panel.tsx
    ├── sections/features.tsx (Client)
    │   └── ui/magic-card.tsx
    │       └── ui/border-beam.tsx
    ├── sections/metrics.tsx (Client)
    │   └── ui/count-up.tsx
    └── sections/cta.tsx (Client)
        ├── ui/retro-grid.tsx
        └── ui/rainbow-button.tsx
```

## 2. Data Flow Architecture

### Unidirectional Data Flow (Server → Client)

1. **Source of Truth**: `lib/data.ts` — strongly typed TypeScript file with all static content
   - Exports: `heroContent`, `terminalSteps`, `pipelineStages` (10 items), `featureList` (6 items), `metricStats` (4 items)
   - Decouples content edits from component logic

2. **Server Injection**: `app/page.tsx` (Server Component)
   - Imports data from `lib/data.ts`
   - Passes data as props to Section components
   - Example: `<Pipeline data={pipelineStages} />`

3. **Client Hydration**:
   - Sections marked `"use client"` only if they need interactivity or hooks
   - Pipeline Section: Uses local `useState` for active card (detail panel)

## 3. Dynamic Import Strategy

### Critical Path (Eager Load)
- `app/layout.tsx` (global fonts/styles)
- `sections/hero.tsx` (LCP — must render immediately)
- `ui/particles.tsx` (critical visual background)
- `ui/split-text.tsx` (critical headline)

### Lazy Load (next/dynamic)
```typescript
const QuickStart = dynamic(() => import('@/components/sections/quick-start'), {
  loading: () => <SectionSkeleton />,
});
const Pipeline = dynamic(() => import('@/components/sections/pipeline'), {
  loading: () => <SectionSkeleton height="600px" />,
});
const Features = dynamic(() => import('@/components/sections/features'), {
  loading: () => <SectionSkeleton />,
});
const Metrics = dynamic(() => import('@/components/sections/metrics'), {
  loading: () => <SectionSkeleton />,
});
const CTA = dynamic(() => import('@/components/sections/cta'), {
  loading: () => <SectionSkeleton />,
});
```

### Library Shaking
- `gsap`: Only imported inside `hero.tsx`
- `motion/react`: Imported only in specific UI components

## 4. Responsive Breakpoint Strategy

### Mobile-First approach:

| Breakpoint | Width | Layout |
|-----------|-------|--------|
| Base (Mobile) | <640px | Single column, flex-col, 100% width cards |
| `md` (Tablet) | 640-1024px | Relaxed padding, 2-col grids |
| `lg` (Desktop) | 1024-1280px | Pipeline 2-row grid, Features 3-col |
| `xl` (Wide) | >1280px | Max-width constraints (`max-w-7xl mx-auto`) |

### Per-Section Responsive:
- **Hero**: Full viewport height on all, particles reduce 40→20 on mobile
- **Pipeline**: Vertical stack mobile → 2-col tablet → 2-row x 5-col desktop
- **Features**: 1-col mobile → 2-col tablet → 3-col desktop
- **Metrics**: 2x2 grid mobile → 4-col desktop

## 5. IntersectionObserver Strategy

### Global Hook: `hooks/use-in-view.ts`
Wrapper around `motion/react`'s `useInView` with configurable thresholds.

### Per-Section:
| Section | Trigger | Threshold | Behavior |
|---------|---------|-----------|----------|
| Hero | Page load | N/A | Immediate |
| Quick Start | Enter viewport | 0.2 | Start typing once |
| Pipeline | Enter viewport | 0.1 | Stagger cards (100ms) |
| Features | Enter viewport | 0.1 | Stagger cards (100ms) |
| Metrics | 50% visible | 0.5 | CountUp once |
| CTA | Enter viewport | 0.2 | Gradient animation |

### Canvas Lifecycle:
- Particles: Start on load, pause when Hero exits viewport, resume on re-entry

## 6. Project Milestones

| # | Milestone | Description |
|---|-----------|-------------|
| M1 | Scaffold & Foundation | Next.js 15 setup, Tailwind v4, colors, data.ts, component primitives |
| M2 | The Hook (Hero & Quick Start) | Hero with GSAP SplitText + Particles, Terminal with typing |
| M3 | Core Complexity (Pipeline) | 10-stage grid, CSS connectors, detail panels, responsive |
| M4 | Social Proof & CTA | Magic Cards, CountUp metrics, Rainbow Button CTA |
| M5 | Optimization & Polish | Dynamic imports, Lighthouse 95+, a11y, responsive QA |

## 7. Sprint Planning (3 Sprints)

### Sprint 1: Setup & High Impact (Sections 1 & 2)
- Task 1.1: Initialize Next.js 15, install all dependencies
- Task 1.2: Configure Tailwind v4 `@theme` with project colors + keyframes
- Task 1.3: Copy MagicUI + ReactBits component source files
- Task 1.4: Create Hero section with Particles + SplitText
- Task 1.5: Create QuickStart with Terminal + TypingAnimation

### Sprint 2: The Product Engine (Sections 3 & 4)
- Task 2.1: Implement Pipeline data structure in lib/data.ts
- Task 2.2: Build Pipeline responsive grid (mobile/tablet/desktop)
- Task 2.3: Implement CSS Connectors (::after pseudo-elements)
- Task 2.4: Build detail panel (AnimatePresence)
- Task 2.5: Build Features section with MagicCard + BorderBeam

### Sprint 3: Trust, Action & Optimization (Sections 5, 6 & Polish)
- Task 3.1: Build Metrics section with CountUp
- Task 3.2: Build CTA section with RainbowButton + RetroGrid
- Task 3.3: Implement next/dynamic lazy loading for below-fold
- Task 3.4: Responsive QA across breakpoints
- Task 3.5: Lighthouse optimization, a11y, reduced-motion
- Task 3.6: SEO metadata + Open Graph

## 8. Risk Mitigation Architecture

| Risk | Mitigation |
|------|------------|
| Animation jank / layout shift | Define explicit min-heights for all sections, skeleton loaders |
| GSAP vs React state conflicts | Use `useGSAP` hook for cleanup, isolate GSAP to Hero only |
| CSS Connectors breakage on resize | Use Grid/Flex gaps, percentage-based positioning |
| Tailwind v4 edge cases | Standard CSS variables fallback in globals.css |
| Bundle exceeds 150KB | Dynamic imports, GSAP-removal fallback plan |

## 9. State Management (Minimalist)

- **Global state**: None required (landing page, no user data)
- **Pipeline Section**: `activeStage: number | null` (local useState)
  - Click card → set index → show detail panel
  - Click again / close → set null
- **Terminal**: `isTypingComplete: boolean` (triggers success message)

## 10. SEO and Performance Strategy

### Metadata
```typescript
export const metadata: Metadata = {
  title: "Claude-Symphony | Multi-AI Orchestration Framework",
  description: "Orchestrate Claude, Gemini, and Codex in a unified 10-stage pipeline from brainstorming to deployment.",
  openGraph: { ... },
}
```

### Font Optimization
- Use `next/font/local` with Geist Sans + Geist Mono
- `display: 'swap'`, subset latin

### Performance Targets
| Metric | Target | Strategy |
|--------|--------|----------|
| LCP | <2.5s | Hero is text-first, fonts preloaded |
| CLS | <0.1 | Explicit dimensions, skeleton loaders |
| FID/INP | <200ms | No heavy JS during interaction |
| Bundle | <150KB | Dynamic imports, tree-shaking |

### Bundle Isolation
- GSAP: Only in Hero bundle (not global)
- lucide-react: Individual icon imports for tree-shaking
- motion: Only in components that need it (4 MagicUI + CountUp)
